<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - TransitFeeds</title>

    <!-- ==== AdminLTE CSS (Keeping for JS dependencies, but overriding visuals) ==== -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/overlayScrollbars@2.1/css/OverlayScrollbars.min.css" />

    <!-- ==== Tailwind CDN (utility-first) ==== -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'San Francisco', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'sans-serif'],
                    },
                    colors: {
                        apple: {
                            gray: '#f5f5f7',
                            blue: '#0071e3',
                            bg: '#fbfbfd',
                            border: '#d2d2d7'
                        }
                    },
                    boxShadow: {
                        'soft': '0 4px 20px rgba(0,0,0,0.03)',
                        'medium': '0 8px 30px rgba(0,0,0,0.04)',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Apple-style overrides */
        body {
            background-color: #f5f5f7 !important;
            font-family: -apple-system, BlinkMacSystemFont, "San Francisco", "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        .main-header {
            background-color: rgba(255, 255, 255, 0.8) !important;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0,0,0,0.05) !important;
            box-shadow: none !important;
        }

        .main-sidebar {
            background-color: #ffffff !important;
            box-shadow: 1px 0 0 rgba(0,0,0,0.05) !important;
            border-right: none !important;
        }

        .brand-link {
            border-bottom: 1px solid rgba(0,0,0,0.05) !important;
        }

        .nav-link {
            border-radius: 8px !important;
            color: #1d1d1f !important;
            font-weight: 500;
            padding: 8px 12px;
            transition: all 0.2s ease;
        }
        
        .nav-link:hover {
            background-color: rgba(0,0,0,0.03) !important;
            color: #0071e3 !important;
        }

        .nav-link.active {
            background-color: rgba(0, 113, 227, 0.1) !important;
            color: #0071e3 !important;
            box-shadow: none !important;
        }

        .nav-icon {
            color: #86868b;
            font-size: 0.9rem !important;
            margin-right: 0.5rem !important;
            transition: color 0.2s ease;
        }

        .nav-link:hover .nav-icon, .nav-link.active .nav-icon {
            color: #0071e3 !important;
        }

        .content-wrapper {
            background-color: #f5f5f7 !important;
        }

        .card {
            border: none !important;
            border-radius: 16px !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px -1px rgba(0, 0, 0, 0.02) !important;
            background: white !important;
        }

        /* Clean Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #d1d1d6;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #8e8e93;
        }
    </style>
</head>
<body class="hold-transition sidebar-mini layout-fixed layout-navbar-fixed text-gray-800">
    <div class="wrapper">

        <!-- ==== Header (Navbar) ==== -->
        <nav class="main-header navbar navbar-expand navbar-white navbar-light h-14">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
                </li>
                 <li class="nav-item d-none d-sm-inline-block">
                    <span class="nav-link text-gray-400 font-medium select-none">@ViewData["Title"]</span>
                </li>
            </ul>
            
            <ul class="navbar-nav ml-auto gap-4 px-4">
                <li class="nav-item">
                    <a class="text-gray-400 hover:text-gray-600 transition-colors" href="#" role="button">
                        <i class="fas fa-search"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="text-gray-400 hover:text-gray-600 transition-colors" href="#" role="button">
                        <i class="fas fa-bell"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <div class="h-8 w-8 rounded-full bg-gray-200 overflow-hidden ring-2 ring-white shadow-sm">
                        <img src="https://ui-avatars.com/api/?name=Admin&background=0071e3&color=fff" class="h-full w-full object-cover" alt="User">
                    </div>
                </li>
            </ul>
        </nav>

        <!-- ==== Sidebar ==== -->
        <aside class="main-sidebar sidebar-light-primary elevation-0">
            <a href="/" class="brand-link h-14 flex items-center justify-center">
                <span class="brand-text font-semibold text-lg tracking-tight text-gray-900">
                    <i class="fas fa-bus-alt text-blue-600 mr-2"></i>TransitFeeds
                </span>
            </a>

            <div class="sidebar px-3 mt-3">
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column gap-1" data-widget="treeview" role="menu" data-accordion="false">
                        
                        <li class="nav-header text-xs font-semibold text-gray-400 uppercase tracking-widest mt-4 mb-2 pl-2">Overview</li>
                        <li class="nav-item">
                            <a asp-controller="Home" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Home" ? "active" : "")">
                                <i class="nav-icon fas fa-chart-pie"></i>
                                <p>Dashboard</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a asp-controller="Map" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Map" ? "active" : "")">
                                <i class="nav-icon fas fa-map"></i>
                                <p>Live Map</p>
                            </a>
                        </li>

                        <li class="nav-header text-xs font-semibold text-gray-400 uppercase tracking-widest mt-6 mb-2 pl-2">Transit Data</li>
                        <li class="nav-item">
                            <a asp-controller="Agencies" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Agencies" ? "active" : "")">
                                <i class="nav-icon fas fa-building"></i>
                                <p>Agencies</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a asp-controller="TransitRoutes" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "TransitRoutes" ? "active" : "")">
                                <i class="nav-icon fas fa-route"></i>
                                <p>Routes</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a asp-controller="Stops" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Stops" ? "active" : "")">
                                <i class="nav-icon fas fa-map-pin"></i>
                                <p>Stops</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a asp-controller="Trips" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Trips" ? "active" : "")">
                                <i class="nav-icon fas fa-bus"></i>
                                <p>Trips</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a asp-controller="StopTimes" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "StopTimes" ? "active" : "")">
                                <i class="nav-icon fas fa-clock"></i>
                                <p>Stop Times</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a asp-controller="TransitCalendar" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "TransitCalendar" ? "active" : "")">
                                <i class="nav-icon fas fa-calendar-alt"></i>
                                <p>Calendars</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a asp-controller="ShapesMaster" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "ShapesMaster" ? "active" : "")">
                                <i class="nav-icon fas fa-bezier-curve"></i>
                                <p>Shapes</p>
                            </a>
                        </li>

                        <li class="nav-header text-xs font-semibold text-gray-400 uppercase tracking-widest mt-6 mb-2 pl-2">System</li>
                        <li class="nav-item">
                            <a asp-controller="Import" asp-action="Index" class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Import" ? "active" : "")">
                                <i class="nav-icon fas fa-sync"></i>
                                <p>Import / Export</p>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- ==== Main Content ==== -->
        <div class="content-wrapper">
            <section class="content pt-8 px-6 pb-6">
                @RenderBody()
            </section>
        </div>

        <!-- ==== Footer ==== -->
        <footer class="main-footer bg-white border-t-0 text-xs text-gray-400 py-4 px-6">
            <div class="float-right d-none d-sm-inline">
                TransitFeeds v1.0
            </div>
            <strong>&copy; 2025 TransitFeeds.</strong> Designed with <i class="fas fa-heart text-red-400 mx-1"></i>
        </footer>
    </div>

    <!-- ==== Scripts ==== -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/overlayScrollbars@2.1/js/jquery.overlayScrollbars.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
